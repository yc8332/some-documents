### Redis服务器是一个事件驱动程序，需要处理两类事件
> `文件事件` 监听的套接字准备好连接应答、读取、写入、关闭等操作时产生的事件   
> `事件事件` 定时事件、周期性事件等   

### 文件事件
文件事件处理器使用I/O多路复用程序同时监听多个套接字，当被监听的套接字准备好连接应答、读取、写入、关闭等操作时，相应的文件事件就会产生。   
当文件事件并发出现时，I/O多路复用程序将产生事件的套接字都放到一个队列中，然后逐个向文件事件分派器传送套接字，当上一个套接字的事件被处理完毕之后(关联的事件处理器执行完毕)，才会传送下一个套接字。   
![](http://wx4.sinaimg.cn/mw690/abf82c72gy1flgs6wesifj20f40cbdhh.jpg)

### 时间事件
时间事件分两类：   
> `定时事件` 指定时间后执行一次   
> `周期性事件` 每隔指定时间就执行一次   

一个时间事件包含三个属性：   
> `id` 时间事件的全局唯一ID   
> `when` 时间事件的到达时间   
> `timeProc` 时间事件处理器(回调函数)，时间事件到达时执行   

所有时间事件放在一个无序链表中，serverCron执行时，遍历链表找到已到达的时间事件并调用相应的事件处理器。   

### 事件的调度与执行
Redis对文件事件和时间事件的处理都是同步的，不会中断正在处理的事件去处理另一个事件。当文件事件和时间事件同时产生时，文件事件会先于时间事件处理。因此，时间事件的实际处理时间会比预设的时间稍晚一些。   
